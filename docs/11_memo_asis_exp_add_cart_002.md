# Experiment Decision Memo (Draft)

**Experiment:** `exp_add_cart_002`

**Confidence:** 0.95

**Data source:** `iceberg.exp.metric_aggregates_overall` → `iceberg.exp.analysis_results`

> Generated at: `2026-02-08T09:37:44.344687+00:00`

---


<!-- BEGIN:AB -->
## Summary Table

| metric | control mean | treatment mean | delta | rel lift | CI low | CI high | p-value | method |
|---|---:|---:|---:|---:|---:|---:|---:|---|
| conversion | 0.0990453 | 0.122425 | 0.0233795 | 0.236048 | 0.0167024 | 0.0300565 | 6.77192e-12 | two_proportion_z |
| pre_revenue | 11.9967 | 12.0168 | 0.0200776 | 0.00167359 | -0.0435833 | 0.0837386 | 0.536475 | welch_normal_approx |
| revenue | 1.18799 | 1.47128 | 0.283293 | 0.238465 | 0.200265 | 0.366321 | 2.26943e-11 | welch_normal_approx |

---

## Notes

- This section is generated by the **A/B pipeline** (joined outcomes→exposures; per-metric tests).

- Add product context (guardrails, rollout risks, segment checks) before sharing externally.
<!-- END:AB -->

<!-- BEGIN:CUPED -->
## CUPED (Variance Reduction)

- Covariate: `pre_revenue`
- Target metric: `revenue`

- Theta: `-0.001331060459`
- x_mean: `12.0067`

- control_mean (cuped): `1.18797`
- treatment_mean (cuped): `1.47129`

- delta: `0.283319`
- rel_lift: `0.23849`
- p-value: `2.25961e-11`
- ci95: `[0.200291, 0.366347]`

Notes:
- This section is generated by the **CUPED pipeline** (pooled theta; per-user adjustment).
- Interpretation: CUPED tightens variance only when the covariate is correlated with the target metric.
<!-- END:CUPED -->

<!-- BEGIN:DID -->
## Difference-in-Differences (DiD)

- Metric pre: `pre_revenue`
- Metric post: `revenue`

- Window start: `2026-01-01 00:00:07`
- Window end: `2026-01-14 23:59:36`

### Cell means
- control_pre: `11.9967`
- control_post: `1.18799`
- treatment_pre: `12.0168`
- treatment_post: `1.47128`

### Estimate
- did: `0.263215`
- se: `0.05338`
- z: `4.93096`
- p-value: `8.18249e-07`
- ci95: `[0.15859, 0.36784]`
- rel_lift (vs control post): `0.221564`

Notes:
- This section is generated by the **DiD pipeline** using a conservative SE (independent 4-mean approximation).
- Use DiD when randomization is imperfect or rollout is staggered; validate pre-trends separately.
<!-- END:DID -->

<!-- BEGIN:PRETRENDS -->
## DiD Pre-trend Diagnostics

- Metric: `pre_revenue`
- Grain: `k_days` (relative to exposure, pre period only)
- Window start: `2026-01-01 00:00:07`
- Window end: `2026-01-14 23:59:36`

- num_pre_points: `27`
- slope(treatment-control): `-0.00279042456`
- se: `0.005366623012`
- p-value: `0.603092`
- Verdict: **PASS**

Interpretation:
- PASS means we do **not** detect evidence of a linear pre-trend in treatment-control deltas (at α=0.05).
- This is a diagnostic, not a proof; inspect plots / segments for higher assurance in real experiments.
<!-- END:PRETRENDS -->
